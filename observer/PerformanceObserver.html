<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PerformanceObserver</title>
    <!-- **PerformanceObserver 用于监听记录 performance 数据的行为，一旦记录了就会触发回调，这样我们就可以在回调里把这些数据上报。** -->
  </head>
  <body>
    <button onclick="measureClick()">Measure</button>

    <img
      src="https://p9-passport.byteacctimg.com/img/user-avatar/4e9e751e2b32fb8afbbf559a296ccbf2~300x300.image"
    />

    <script>
      const performanceObserver = new PerformanceObserver((list) => {
        list.getEntries().forEach((entry) => {
          console.log("entry:", entry); // 上报
        });
      });
      performanceObserver.observe({
        entryTypes: ["resource", "mark", "measure"],
      });

      performance.mark("registered-observer");

      function measureClick() {
        performance.measure("button clicked");
      }
    </script>
  </body>
</html>
